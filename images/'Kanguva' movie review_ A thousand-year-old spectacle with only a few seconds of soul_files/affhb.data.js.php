
//tpl=affhb.data

(function(W,D,N) {
  W[N]=W[N]||{};
  function chkDomain(srchMnDmn,curDmn){var arDomains=srchMnDmn;if(!Array.isArray(arDomains)){arDomains=[arDomains]} if('*'==arDomains[0]){return 1}for(var i=0,l=arDomains.length;i<l;i++){if(chkDomainImpl(arDomains[i],curDmn)){return 1}} return 0}
  function chkDomainImpl(srchMnDmn,curDmn){curDmn=curDmn||window.location.hostname||'';if(curDmn==srchMnDmn){return 1} var artmp=curDmn.split('.'+srchMnDmn);if((2==artmp.length)&&(""==artmp[1])){return 1} return 0}

    
if(W[N]['affhb2_affpbjs_hvr_newindianexpress.com']){return}W[N]['affhb2_affpbjs_hvr_newindianexpress.com']=1;
    window.ID5EspConfig={partnerId:1448};

  W[N].affGeoCmd=W[N].affGeoCmd||[];
  
  var pbjsName='affpbjs';

  if( -1 === location.href.indexOf('hb_disable') && (chkDomain( ["newindianexpress.com"] ))) {
    (function() {
    "use strict";
        window.googletag = window.googletag || {};window.googletag.cmd = window.googletag.cmd || [];
    var pbjsNM='affpbjs';
    window[pbjsNM] = window[pbjsNM] || {};
    window[pbjsNM].que = window[pbjsNM].que || [];
    var pbjs=window[pbjsNM], Logger={}, G={refreshInViewBySlot:function(){}};
    
    function loadScript(url) { var o = 'script', s = document, a = s.createElement(o), m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = url; m.parentNode.insertBefore(a,m); }
    


      window._aff_pob = window._aff_pob || [];
      if( 2 == 0) {
        loadScript('//lgq.ph.affinity.com/affpobq.js');
      }

      loadScript( 'https://cdn4-hbs.affinitymatrix.com/app/pbjs/2024B/prebid8.44.0-b747ac6c4bc7f83ccf6bab4d1a0086d2.js' );
      
      
	var G_adUnitsFiltered = [{"id":"div-gpt-ad-1599140461662-0","code":"/21930596546,3167926/IP_newindianexpress.com_ALL_Multisize_RON_Both_HVR_MC","bids":[{"bidder":"adpone","params":{"placementId":124624112238115},"aff":{"bsizes":[[300,250]]}},{"bidder":"adpone","params":{"placementId":124624112241897},"aff":{"bsizes":[[300,600]]}},{"bidder":"adpone","params":{"placementId":124624112244926},"aff":{"bsizes":[[320,50]]}},{"bidder":"richaudience","params":{"pid":"X62HdWkAb2","supplyType":"site"},"aff":{"bsizes":[[300,250],[728,90],[160,600],[320,50],[320,100],[300,600],[120,600],[970,250],[336,280],[970,90]]}}]}];
      var G_adUnits=[{"aff":{"code":"/21930596546,3167926/IP_newindianexpress.com_ALL_Multisize_RON_Both_HVR_MC","id":"div-gpt-ad-1599140461662-0","dynamicId":true,"lgcode":22028675948,"refsh":{"enable":false,"delaySec":90,"maxCall":5},"ad_unit_type":"c2s_hb"},"mediaTypes":{"banner":{"sizes":[[300,250],[728,90],[160,600],[320,50],[320,100],[300,600],[120,600],[970,250],[336,280],[970,90]]}},"bids":[{"bidder":"adlivetech","params":{"uid":354065}},{"bidder":"adtelligent","params":{"aid":600947}},{"bidder":"appnexus","params":{"placementId":32806158},"aff":{"bsizes":[[300,250],[728,90],[160,600],[320,50],[320,100],[300,600],[120,600],[970,250],[336,280],[970,90]]}},{"bidder":"bluerooster2","params":{"placementId":32681441},"aff":{"bsizes":[[300,250],[728,90],[160,600],[320,50],[320,100],[300,600],[120,600],[970,250],[336,280],[970,90]]}},{"bidder":"insticator","params":{"adUnitId":"01J1D0AKPNHW6Y6FPJ30V03KN6"},"aff":{"bsizes":[[300,250],[728,90],[160,600],[320,50],[320,100],[300,600],[120,600],[970,250],[336,280],[970,90]]},"labelAny":["us","au","be","ca","co","hk","jp","nz","za","ch","ae","sg","sa","kr","br","tw","at","co","fr","de","jp","nl","pl","es","gb"]},{"bidder":"mediafuse","params":{"placementId":26753268},"aff":{"bsizes":[[300,250],[728,90],[160,600],[320,50],[320,100],[300,600],[120,600],[970,250],[336,280],[970,90]]}},{"bidder":"projectagora","params":{"placementId":27748289},"aff":{"bsizes":[[300,250],[728,90],[160,600],[320,50],[320,100],[300,600],[120,600],[970,250],[336,280],[970,90]]}},{"bidder":"pubmatic","params":{"publisherId":"32987","adSlot":"IP_newindianexpress.com_ALL_Multisize_RON_Both_HVR_HB3"},"aff":{"bsizes":[[300,250],[320,50],[320,100],[336,280]]}},{"bidder":"pubmatic","params":{"publisherId":"32987","adSlot":"IP_newindianexpress.com_ALL_Multisize_RON_Both_HVR_HB1"},"aff":{"bsizes":[[728,90],[970,250],[970,90]]}},{"bidder":"pubmatic","params":{"publisherId":"32987","adSlot":"IP_newindianexpress.com_ALL_Multisize_RON_Both_HVR_HB2"},"aff":{"bsizes":[[160,600],[300,600],[120,600]]}},{"bidder":"rubicon","params":{"accountId":9023,"siteId":417548,"zoneId":3342598},"aff":{"bsizes":[[300,250],[728,90],[160,600],[320,50],[320,100],[300,600],[120,600],[970,250],[336,280],[970,90]]}},{"bidder":"smartadserver","params":{"siteId":663430,"pageId":1988698,"formatId":113381,"domain":"https://prg-apac.smartadserver.com"},"aff":{"bsizes":[[300,250],[728,90],[160,600],[320,50],[320,100],[300,600],[120,600],[970,250],[336,280],[970,90]]}},{"bidder":"sovrn","params":{"tagid":"1231782"},"aff":{"bsizes":[[970,250]]}},{"bidder":"sovrn","params":{"tagid":"1231783"},"aff":{"bsizes":[[300,600]]}},{"bidder":"sovrn","params":{"tagid":"1231781"},"aff":{"bsizes":[[970,90]]}},{"bidder":"sovrn","params":{"tagid":"1231780"},"aff":{"bsizes":[[728,90]]}},{"bidder":"sovrn","params":{"tagid":"1231779"},"aff":{"bsizes":[[336,280]]}},{"bidder":"sovrn","params":{"tagid":"1231777"},"aff":{"bsizes":[[320,50]]}},{"bidder":"sovrn","params":{"tagid":"1231778"},"aff":{"bsizes":[[320,100]]}},{"bidder":"sovrn","params":{"tagid":"1231785"},"aff":{"bsizes":[[160,600]]}},{"bidder":"sovrn","params":{"tagid":"1231784"},"aff":{"bsizes":[[120,600]]}},{"bidder":"sovrn","params":{"tagid":"1231776"},"aff":{"bsizes":[[300,250]]}},{"bidder":"teads","params":{"pageId":208493,"placementId":224831},"aff":{"bsizes":[[300,250],[728,90],[160,600],[320,50],[320,100],[300,600],[120,600],[970,250],[336,280],[970,90]]}},{"bidder":"valueimpression","params":{"siteId":"164691"},"aff":{"bsizes":[[300,250],[728,90],[160,600],[320,50],[320,100],[300,600],[120,600],[970,250],[336,280],[970,90]]}},{"bidder":"xapads","params":{"host":"rtb-apac.rtbserve.io","zoneId":"136023"},"aff":{"bsizes":[[300,250],[728,90],[160,600],[320,50],[320,100],[300,600],[120,600],[970,250],[336,280],[970,90]]}}]},{"aff":{"code":"/42115163,3167926/IP_newindianexpress.com_ALL_Multisize_RON_Both_HVR","id":"div-gpt-ad-1596728968543-5164","dynamicId":true,"lgcode":22028586166,"refsh":{"enable":false,"delaySec":90,"maxCall":5},"ad_unit_type":"c2s_hb"},"mediaTypes":{"banner":{"sizes":[[728,90],[160,600],[300,250],[300,600],[320,50],[320,100]]}},"bids":[{"bidder":"hvr_copy_config","params":{"dfp_au":"/21930596546,3167926/IP_newindianexpress.com_ALL_Multisize_RON_Both_HVR_MC"}}]}],
      G_options = {"pbjsconf":{"priceGranularity":{"buckets":[{"precision":2,"min":0,"max":2,"increment":0.01},{"precision":2,"min":2,"max":5,"increment":0.05},{"precision":2,"min":5,"max":20,"increment":0.5}]},"currency":{"adServerCurrency":"USD"},"bidderTimeout":1800,"timeoutBuffer":500,"userSync":{"syncEnabled":true,"filterSettings":{"iframe":{"bidders":"*","filter":"include"},"image":{"bidders":"*","filter":"include"}},"syncsPerBidder":5,"syncDelay":3000,"auctionDelay":0,"aliasSyncEnabled":true,"userIds":[{"name":"sharedId","storage":{"type":"html5","name":"_sharedid","expires":365}},{"name":"id5Id","params":{"partner":1448},"storage":{"type":"html5","name":"id5id","expires":90,"refreshInSeconds":28800}},{"name":"lotamePanoramaId","params":{"clientId":"17425"}},{"name":"hadronId","params":{"partnerId":688},"storage":{"name":"hadronId","type":"html5","expires":365}}]},"enableSendAllBids":false,"sizeConfig":[{"labels":["alldev"],"mediaQuery":"(min-width: 320000px)","sizesSupported":[[728,90],[160,600],[300,250],[300,600],[970,250],[320,50],[320,100],[336,280],[970,90],[120,600]]}],"enableTIDs":true},"aff":{"collapse_empty_div":false,"trgt_use_div_id":1,"rfrall":{"conf":{"delaySec":90,"maxCall":5},"enabled":false},"log":{"url":"//hblib.ph.affinity.com/lg?vp=afp2.1&hst=ph-pbjs-web-iowa-insgroup-01-gx7t","enabled":true,"timeout":2000,"lgbrsp":0,"afelog":0,"pubid":"hvr_newindianexpress.com"},"geo_filter":{"enabled":true,"data_center":"ae","version":"3"},"pbExEnabled":false,"bidderOwner":{"ys":["adlivetech","adpone","nobid","sovrn","adtelligent","yieldmo","pubmatic","valueimpression","xapads","projectagora","mediafuse","rubicon","richaudience","bluerooster2","blueroosterm","teads","appnexus","smartadserver","insticator"]},"gpid":3,"hbConfName":"hvr_newindianexpress.com","bidModifier":{"projectagora":{"*":0.75}},"bmsk":{"lp":1,"gdpr":2,"ccpa":4,"coppa":8,"schain":16,"blocked":32},"bdrdtl3":{"appnexus":{"lp":"placementId","bit":23},"pubmatic":{"lp":"adSlot","bit":23},"sovrn":{"lp":"tagid","bit":23},"adtelligent":{"lp":"aid","bit":23},"valueimpression":{"lp":"siteId","bit":23},"xapads":{"lp":"zoneId","bit":23},"projectagora":{"lp":"placementId","bit":7},"bluerooster2":{"lp":"placementId","bit":23},"adpone":{"lp":"placementId","bit":1},"rubicon":{"lp":"zoneId","bit":23},"adlivetech":{"lp":"uid","bit":23},"smartadserver":{"lp":"pageId","bit":23},"mediafuse":{"lp":"placementId","bit":23},"hvr_copy_config":{"lp":true,"bit":31},"blueroosterm":{"lp":"zoneId","bit":63},"insticator":{"lp":"adUnitId","bit":31},"richaudience":{"lp":"pid","bit":19},"teads":{"lp":"placementId","bit":23}}},"bidderconf":{"bidders":["appnexus","pulsepoint","pubmatic","sovrn","ix","ucfunnel","adtelligent","valueimpression","connectad","adkernel","xapads","yieldmo","bizzclick","explorads","adtrue","unibots","yahoossp","verizonmedia","adlivetech","nobid","epsilon","ergadx","smartadserver","mediafuse","rubicon","medianet","mcanvas"],"config":{"schain":{"validation":"off","config":{"ver":"1.0","complete":1,"nodes":[{"asi":"affinity.com","sid":"29","hp":1}]}}}}},
      siteid = '66',
      dc = 'ae';
      G_options.debug=(-1<location.href.indexOf('pbjs_debug=true')); 
      W[N].aftl=(G_options.debug && 'function' == typeof W.__affinity_debug_timelog) ? function(i,m){try{W.__affinity_debug_timelog(i,m)}catch(e){}}:function(){};

      

        var bidderIdMapping={},
        prpBdrData=function (){
          var mvlccpa =G_options.aff.bmsk.ccpa,
              mvlschain =G_options.aff.bmsk.schain,
              mvlgdpr =G_options.aff.bmsk.gdpr;

          G_options.bidderconf=G_options.bidderconf||{};
          if( !Array.isArray(G_options.bidderconf.bidders) ){
              G_options.bidderconf.bidders=[];
          }
          Object.keys(G_options.aff.bdrdtl3).forEach(function (bdrNm){
            bidderIdMapping[bdrNm]=G_options.aff.bdrdtl3[bdrNm].lp;
            var bit=G_options.aff.bdrdtl3[bdrNm].bit;
            G_options.aff.bdrdtl3[bdrNm].ccpa = ( mvlccpa == ( bit & mvlccpa ) );
            G_options.aff.bdrdtl3[bdrNm].gdpr = ( mvlgdpr == ( bit & mvlgdpr ) );
            if(  mvlschain == ( bit & mvlschain ) ){
              if(-1 == G_options.bidderconf.bidders.indexOf(bdrNm) ){
                G_options.bidderconf.bidders.push(bdrNm);
              }
            }
          });

          if( G_options.aff.bidderOwner && G_options.aff.bidderOwner.ys && Array.isArray( G_options.aff.bidderOwner.ys ) && G_options.aff.bidderOwner.ys.length ){
            (function(){
              var bdr2=[], ys=G_options.aff.bidderOwner.ys, albdr=G_options.bidderconf.bidders;
              for(var i=0, l=ys.length; i<l; i++){
                var xBdr=ys[i];
                if( -1 < albdr.indexOf( xBdr ) ){
                  bdr2.push( xBdr );
                }
              }
              if( bdr2.length ){
                G_options.bidderconf.bidders = bdr2;
              }
            })();
          }
          if( G_options.debug ){
            window.console.log( 'affpbjs', 'schain', G_options.bidderconf );
          }

        };
        prpBdrData();
        var console=window.console||{},Logger={};function getLogger(i){var e={};return["log","info","warn","error","debug"].forEach(function(n){console[n]?e[n]=function(){var e,t;G_options.debug&&(e=[].slice.call(arguments),t=new Date,e.unshift([t.getHours(),t.getMinutes(),t.getSeconds()].join(":")),e.unshift("background: #1e5f24; color: #FFFFFF"),e.unshift("%c "+i+" "),console[n].apply(console,e))}:e[n]=function(){}}),e}var Logger=(W[N].getLogger=getLogger)("AffinityPrebid"),gpid=function(){var u={},e="smartphonebanner",t="superleaderboard",n="skyscraper",i="mediumrectangle",p="box",g={"970x250":"billboard","300x50":e,"320x50":e,"300x100":e,"468x60":e,"728x90":"leaderboard","970x90":t,"320x100":t,"160x600":n,"120x600":n,"300x600":n,"300x250":i,"336x280":i,"250x250":p,"200x200":p};return{gen:function(e,t,n){n=n||5;var i,a,o,r,d,f="",s=p;try{if(Array.isArray(t))for(var c=0;c<t.length;c++){var l=t[c];if(Array.isArray(l)&&(l=l.join("x")),g[l]){s=g[l];break}}else""!=t&&"1x1"!==t&&g[t]&&(s=g[t]);s&&(r=n,d=1,(o=u)[a=s]&&r<(d=o[a]+1)&&(d=1),i={n:o[a]=d},f=(e=e.replace(/(^\/\d*),\d*\//,"$1/"))+"#"+s+"#"+i.n)}catch(e){}return f}}}((window,document)),addGeoSectionLabels=(!function(u,p){"use strict";if(u[p]=u[p]||{},!u[p].tcfv2){u[p].tcfv2=u[p].tcfv2||{};var g=u[p].getLogger("AffinityPrebid_TCF"),b=function(){return{google:755,pubmatic:76,sovrn:13,improvedigital:253,between:724,rise:1043,adagio:617,"33across":58,xander:32,appnexus:32,oftmedia:32,brightcom:883,resetdigital:1162,mediafuse:32,minutemedia:918,projectagora:1032,bluerooster:32,bluerooster2:32,blueroosterm:32,blueroosterm:52,adtelligent:410,adyoulike:259,luponmedia:1132,ogury:31,openx:69,oms:883,openweb:280,richaudience:108,pixfuture:839,insticator:910,criteo:91,adkernel:14,ergadx:14,explorads:14,xapads:14,adliveconnect:14,eplanning:90,kueezrtb:1165,vidazoo:744,adpone:799,connectad:138,onetag:241,ucfunnel:607,smilewanted:639,yahoossp:25,verizonmedia:25,nextMillennium:1060,nobid:816,grid:686,epsilon:24,smartadserver:45,smartyads:534,sharethrough:80,teads:132,medianet:142,ix:10,rubicon:52}},m=b().google,h=[m],_={eventStatus:"stub",gdprApplies:!1,vendor:{consents:{}}},i=(_.vendor.consents[m]=!0,function(t,n,e){var i,a,o,r,d,f,s,c,l;"function"!=typeof window.__tcfapi?t(_):(e=e||{},i=h,Array.isArray(e.vendorIds)&&(i=e.vendorIds,Array.isArray(i.vendorIds))&&(i=i.vendorIds),o=function(e){a&&(a=0,t(e))},d=function(e){r&&(r=0,n(e))},f=function(e,t){var n,i;g.log({tcData:e,success:t}),t?"stub"===(t=e&&e.cmpStatus||"")?l():"loaded"===t&&(t=e,n="concentLogs",i=b().google,t.gdprApplies?(u[p].concentCheckSum.lI=!1,t.purpose&&t.purpose.legitimateInterests&&t.purpose.legitimateInterests.hasOwnProperty("2")&&t.vendor&&t.vendor.legitimateInterests&&t.vendor.legitimateInterests.hasOwnProperty(i)?t.purpose.legitimateInterests[2]?t.vendor.legitimateInterests[i]?(u[p].concentCheckSum.lI=!0,g.info(n+" ads are Legitimate.")):g.warn(n+" google is disabled"):g.warn(n+" legitimate[2] is false"):g.error(n+" Invalid TCF response")):(g.info(n+" gdrp not-aplicable"),u[p].concentCheckSum.lI=!0),!1===e.gdprApplies?o(_):!0===e.gdprApplies?"useractioncomplete"===e.eventStatus||"tcloaded"===e.eventStatus?(t=function(e){let t={};var n;return 2===concentCheckSum.aff_tcf_bidder_filter?e.purpose&&e.purpose.legitimateInterests&&e.purpose.legitimateInterests.hasOwnProperty("2")&&e.purpose.legitimateInterests[2]&&(t=e.vendor.legitimateInterests,n=(e.vendor||{}).consents||{},Object.keys(t).forEach(function(e){n[e]&&(t[e]=!0)})):1===concentCheckSum.aff_tcf_bidder_filter&&(t=e.vendor.consents),m in t||(t[m]=!1),t}(e),g.info("concentLogs : tcf bidders concent ",t),_.vendor.consents=t,_.eventStatus=e.eventStatus,_.gdprApplies=!0,o(_)):l():d(4)):d(2)},s=function(e,t){g.info("maintcf",e,t),0==arguments.length?(g.info('__tcfapi("getTCData"',i),window.__tcfapi("getTCData",2,function(e,t){g.info('result__tcfapi("getTCData"',i,e,t),!0===t&&f(e,t)},i)):!0===t&&window.__tcfapi("getTCData",2,function(e,t){g.info('result_evt__tcfapi("getTCData"',i,e,t),t||(e={gdprApplies:!1},t=!0),f(e,t)},i)},c=r=a=1,(l=function(){c&&(c=0,window.__tcfapi("removeEventListener",2,s),window.__tcfapi("addEventListener",2,s))})(),s())});let o="",r="",d=0;u[p].tcfv2.getConcentsWaitForApi=f,u[p].tcfv2.getConcents=function(e,t,n){i(e,t,n)},u[p].tcfv2.getCachedConcents=function(){return _},u[p].tcfv2.getGvlCode=b,u[p].tcfv2.updateConsentManagement=function(e){var n={};return e[p].concentCheckSum.lI&&(e[p].concentCheckSum.startPbjs=!0,g.info("concentLogs turning on startPbjs.")),"function"==typeof e.__tcfapi&&(n.gdpr={cmpApi:"iab",timeout:200,allowAuctionWithoutConsent:!1,defaultGdprScope:!0}),"function"==typeof e.__uspapi&&(n.usp={cmpApi:"iab",timeout:10},e.__uspapi("getUSPData",1,function(e,t){t&&e&&e.uspString&&(n.usp={cmpApi:"static",consentData:{getUSPData:{uspString:e.uspString}}})})),n};var a={eventStatus:"stub",uspapiApplies:!1,consent:""},e=3,t=function(){"function"==typeof u.__uspapi?u.__uspapi("getUSPData",1,function(e,t){var n;t&&(a.eventStatus="direct",n=e.uspString||"",""!=(a.consent=n)&&"1---"!=n&&(a.uspapiApplies=!0),g.log("__uspapi",{uspData:e,success:t,cache:a}))}):--e&&setTimeout(t(),100)};function f(e,t,n){var i,a=Array.from(arguments);""===o?o=new Date:r=new Date,""!==o&&""!==r&&(i=r-o,d+=i),g.info("concentLogs tcf tried at : ",d,"ms"),"function"!=typeof window.__tcfapi?setTimeout(function(){f.apply(u,a)},concentCheckSum.retryInMs):u[p].tcfv2.getConcents(e,t,n)}u[p].uspapi={init_uspapi:t,uspapiApplies:function(){return a.uspapiApplies}},u[p].cmpStatus=function(){return{gdprApplies:u[p].tcfv2.getCachedConcents().gdprApplies,uspapiApplies:u[p].uspapi.uspapiApplies()}}}}(window,(document,"__afflib")),function(){return[]}),prev_updGeoSecLbl=W[N].updGeoSecLbl||0;function isIvt(){var e,t=1;return t=W.moatPrebidApi&&"function"==typeof W.moatPrebidApi.pageDataAvailable&&W.moatPrebidApi.pageDataAvailable()&&(e=W.moatPrebidApi.getMoatTargetingForPage())&&"m_data"in e?e.m_data+""=="1":t}function dfp_getAllSizes(e,n){n=n||0;var i=[];return e&&e.getSizes&&e.getSizes().forEach(function(e){var t;e.getWidth&&(t=0|e.getWidth(),e=0|e.getHeight(),1<t)&&1<e&&i.push(n?t+"x"+e:[t,e])}),i}function amazonReqBid(e,t){if(apstag&&apstag.fetchBids){for(var n=[],i=Array.isArray(e)?[].concat(e):[e],a=0,o=i.length;a<o;a++){var r=i[a],d=r.ignExp?0:dfp_getAllSizes(r,0);d&&d.length&&d[0]&&1<(0|d[0][0])&&n.push({slotID:r.getSlotElementId(),slotName:r.getAdUnitPath(),sizes:d})}if(0<n.length)return e=parseFloat(t.timeout||0),(isNaN(e)||e<=0)&&(e=800),Logger.info("amazon:fetchbids",n[0].slotID,n[0].slotName,e={slots:n,timeout:e}),void apstag.fetchBids(e,function(e){Logger.info("amazon:resp",n[0].slotID,n[0].slotName,e),apstag.setDisplayBids(),t.fnCalBk()})}t.fnCalBk()}W[N].updGeoSecLbl=function(){addGeoSectionLabels=function(){var n=[];try{var e,t=G_options.aff.geo_filter;t.enabled&&t.data_center&&(e=t.data_center,(e=Array.isArray(e)?e:[e]).forEach(function(e,t){""!=(e=(""+e).trim())&&n.push(e)}))}catch(e){}return function(e){return e=e||[],n&&n.length&&(e=[].concat(n)),e="function"==typeof G.get_section_labels?G.get_section_labels(e):e}}(),"function"==typeof prev_updGeoSecLbl&&W[N].updGeoSecLbl!=prev_updGeoSecLbl&&prev_updGeoSecLbl()},W[N].updGeoSecLbl();var pbjs_requestBids_wraper=function(e,t){e.bidsBackHandler(0,0,0,"def")};function executeParallelAuctionAlongsidePrebid(e,t){var n,i=t.timeout,a=t.pbjsReq.bidsBackHandler,o=!1,r=!1,d=!1;function f(){!0!==o&&(o=!0,googletag.cmd.push(function(){a()}))}function s(){r&&d&&f()}n=0,t.amazonAllowed?(n++,amazonReqBid(e,{timeout:i,fnCalBk:function(){r=!0,s()}})):r=!0,t.pbjsAllowed&&t.pbjsReq?(n++,t.pbjsReq.bidsBackHandler=function(){d=!0,s()},pbjs.que.push(function(){pbjs_requestBids_wraper(t.pbjsReq)})):d=!0,0===n?f():window.setTimeout(function(){f()},i)}function express(){"use strict";var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=0<arguments.length&&void 0!==arguments[1]?arguments[1]:{},_=t.amazon||0,i=window.console||{},v=t.tcfv2&&t.tcfv2.enable,y=t.ivtChk&&t.ivtChk.enabled,C=t.ignbIniLoadDIsable||!1,A=t.ignRefreshFromDisplay||!1,S={};function x(e){if(e.length)for(var t=0,n=e.length;t<n;t++)e[t].bids=function(e,t){for(var n=[],i=0,a=e.length;i<a;i++){var o=e[i];(!o.aff||!o.aff.bsizes||U(t,o.aff.bsizes))&&n.push(o)}return n}(e[t].bids,e[t].sizes);return e}A&&!Array.isArray(A.id)&&(A.id=[A.id]),["log","info","warn","error","debug","table"].forEach(function(n){i[n]?S[n]=function(){if(G_options.debug)try{var e=[].slice.call(arguments),t=new Date;"table"==n?e[0]=Object.assign({"Prebid Express":[t.getHours(),t.getMinutes(),t.getSeconds()].join(":")},e[0]):(e.unshift([t.getHours(),t.getMinutes(),t.getSeconds()].join(":")),e.unshift("background: #8B0000; color: #FFFFFF"),e.unshift("%c Prebid Express ")),i[n].apply(i,e)}catch(e){}}:S[n]=function(){}}),S.info("loading express"),S.info(e),0===e.length&&S.info("no valid adUnits found, not loading express");var a=[];function o(e,t,n){(n=n||{}).pos=(n.pos||"")+" W1";var i,a,o=JSON.parse(JSON.stringify(e));try{if(t=t||0,e.adUnits[0].mediaTypes.banner.sizes&&e.adUnits[0].mediaTypes.banner.sizes.length){var r,d=addGeoSectionLabels(e.labels||[]);if(d.length&&(e.labels=d),t||(e.adUnits=x(e.adUnits)),v&&(e.adUnits=ensureBidersByPrivacy(e.adUnits)),y)for(var f=!isIvt(),s=0,c=e.adUnits.length;s<c;s++){for(var l,u=[],p=e.adUnits[s],g=0,b=p.bids.length;g<b;g++)(!(l=p.bids[g]).aff||!l.aff.ivtChk||f)&&u.push(l);e.adUnits[s].bids=u}if(G_options&&G_options.pbjsName&&"affpbjs"===G_options.pbjsName&&W[G_options.pbjsName]&&W[G_options.pbjsName].affAAb()&&e&&e.adUnits&&e.adUnits.length&&e.adUnits.forEach(function(e,t){var n;e.code&&e.aff&&e.aff.code&&(n=e.aff.code,e={divId:e.code||"",lgcode:function(t,n){let i="";if(t.length&&n)for(let e=0;e<t.length;e++){var a=t[e];if(a.aff&&a.aff.code&&a.aff.code===n&&a.aff.lgcode){i=a.aff.lgcode;break}}return i}(G_adUnits,n)},W[G_options.pbjsName].affCBidPF("didMAd",e,!1))}),G_options.aff&&G_options.aff.gpid&&gpid&&gpid.gen)for(var m=0;m<e.adUnits.length;m++){var h,_=e.adUnits[m];!_.ortb2Imp&&_.aff&&_.aff.code&&(h=gpid.gen(_.aff.code,_.mediaTypes.banner.sizes,5))&&(e.adUnits[m].ortb2Imp={ext:{gpid:h,data:{pbadslot:h,adserver:{name:"gam",adslot:_.aff.code}}}})}try{G_options&&G_options.debug&&(r={},e.adUnits.forEach(function(e){var t=[];e.bids.map(function(e){t.push(e.bidder)}),r[e.code]=t.join(",")}),S.info("requestBids ",r,e,n),W[N].aftl(e.adUnits[0].code,"pbjs.auctionStart"))}catch(e){}return pbjs.requestBids(e),i=e.adUnits[0].code,a=(a=45e3)||3e3,void setTimeout(function(){S.info("Cleaning-pbjs-au ",i),pbjs.removeAdUnit&&pbjs.removeAdUnit(i),delete B[i]},a)}}catch(e){S.error(o,t,e)}e.bidsBackHandler(0,0,0,"er1")}var w=!(pbjs_requestBids_wraper=function(e,t,n){W[N].concentCheckSum.startPbjs?(0<a.length&&(a.forEach(function(e,t){e.called||(e.called=!0,o(e.requestObj,e.unqBdr,e.extra))}),a=[]),null!==e&&o(e,t,n)):a.push({requestObj:e,unqBdr:t,extra:n,called:!1})});function r(n,i,a){a=a||"",n&&n.setTargeting&&(a=a+" for ["+n.getSlotElementId()+" : "+n.getAdUnitPath()+"]",w&&(i=W[N].bidMod.getTargetingForSlot(n,i)),Object.keys(i).map(function(e,t){n.setTargeting(e,i[e]),S.info("set key value using "+a+" ["+e+" = "+i[e]+"]")}))}function j(e){e?Array.isArray(e)||(e=[e]):e=pbjs.adUnits;var t,i,a=pbjs.getAdserverTargeting(e.map(function(e,t){return e.code}));a&&(t=googletag.pubads().getSlots(),i={},Object.keys(a).map(function(n,e){a[n]&&t.map(function(e,t){n===e.getSlotElementId()&&document.getElementById(n)&&(e.getAdUnitPath(),r(e,a[n],"div-id"))})}),Object.keys(a).map(function(n,e){a[n]&&t.map(function(e,t){i[e.getAdUnitPath()]||n===e.getAdUnitPath()&&r(e,a[n],"adUnit-Path")})}))}W[N].bidMod&&W[N].bidMod.onReady&&W[N].bidMod.onReady(function(){w=!0});var n,d,I={},B=[];function k(t){for(var e=[],n=0;n<t.length;n++)try{e.push([t[n].getWidth(),t[n].getHeight()])}catch(e){S.info("slot size "+t[n].toString()+" not supported by express")}return e}function U(e,t){try{for(var n=[],i=0,a=e.length,o=0,r=t.length,i=0;i<a;i++)for(o=0;o<r;o++)e[i][0]==t[o][0]&&e[i][1]==t[o][1]&&n.push([e[i][0],e[i][1]]);return n=0==n.length?0:n}catch(e){return 0}}function L(t){try{return JSON.parse(JSON.stringify(t))}catch(e){return S.error(["Fail to clone "+e,t]),t}}G_options.aff.pbExEnabled&&(W[N].exp_upd_aucache=function(e){Array.isArray(e)&&(B=e.reduce(function(e,t){return t.code&&t.bids?e[t.code]=t:S.info("misconfigured adUnit",null,t),e},{}))},W[N].exp_upd_aucache(e),W[N].exp_upd_aucache_merge=function(e,t,n){B[e]&&B[e].aff.code==t&&B[e].bids.push(n)}),G_options.aff.pbExEnabled&&(n=function(){var f,e,s,t,n,c,l,u,p,g=window.googletag,b=g.pubads;function m(e){return(Array.isArray(e)?e:googletag.pubads().getSlots()).slice()}function h(e){for(var t=[],n=e.length-1;-1<n;n--){var i=e[n],a=i.getSlotElementId(),o=(i.getAdUnitPath(),B[a]);o&&(I[a]=i,o.sizes=o.sizes||k(i.getSizes()),t.push(o),e.splice(n,1))}return t}g.display&&g.enableServices&&"function"==typeof b&&b().refresh&&b().disableInitialLoad&&b().getSlots&&b().enableSingleRequest?(S.info("running"),f=g.display,e=g.enableServices,s=b().refresh,t=b().disableInitialLoad,n=b().enableSingleRequest,c=g.defineSlot,g.defineSlot=function(e,t,n){"/"!=e.substr(0,1)&&(e="/"+e),S.info("defineslot:",e,":",n),i=e,a=n,d=r=o=0,G_adUnits.map(function(e,t){e.aff&&e.aff.dynamicId&&i===e.aff.code&&(o=1,a===(d=e).aff.id)&&(r=1)}),1===o&&0===r&&((d=JSON.parse(JSON.stringify(d))).aff.id=a,d.code=a,pbjs.addAdUnits&&pbjs.addAdUnits(d),B[a]=d),B[a]||S.warn({au:i,id:a,er:"wo HB conf"});var i,a,o,r,d,e=c.apply(g,arguments);return G.refreshInViewBySlot(e),e},g.enableServices=function(){return l||t.apply(b()),e.apply(g,arguments)},g.display=function(i,e){e=e||{},S.info("display:",i);var t,n,a,o,r,d=googletag.pubads().getSlots().filter(function(e){return e.getSlotElementId()===i});d.length?(S.info("display: defineslot found for ",i),o=d[0].getAdUnitPath(),JSON.stringify(d)===JSON.stringify([])&&(r=function(e){for(var t in B)if(B.hasOwnProperty(t)&&B[t].aff.id===e)return B[t]}(i))&&r.aff&&r.aff.code&&r.aff.id&&(g.defineSlot(r.aff.code,r.mediaTypes.banner.sizes,r.aff.id).addService(g.pubads()),u||(u=!0,g.enableServices())),f.apply(g,arguments),t=m(t=p?t:googletag.pubads().getSlots().filter(function(e){return e.getSlotElementId()===i})).filter(function(e){var t=e.getSlotElementId(),n=document.getElementById(t);return i==t&&n&&!n.querySelector("div>iframe")&&(S.info(t,"_displayed=false"),e._displayed=!1),!e._displayed}),(t=m(t).filter(function(e){return!e._displayed})).forEach(function(e){S.info(e.getSlotElementId(),"_displayed=true"),e._displayed=!0}),r=0,r=1==t.length&&t[0].ignExp?[]:h(t),A&&A.enabled&&function(e,t,n){var i=document.getElementById(n);if(!i||!i.getAttribute("_affcode"))for(var a=0,o=e.length;a<o;a++){var r=e[a];if(-1<t.indexOf(r)||-1<n.indexOf(r))return!0}return!1}(A.id||[],o,i)||(d&&d.length&&d[0].ignExp?s.apply(b(),[[d[0]]]):!C&&l||(googletag.pubads().isInitialLoadDisabled()&&t.length&&(t=t.filter(function(e){return!e.ignExp})).length&&(_?amazonReqBid(t,{timeout:_.timeout,fnCalBk:function(){s.apply(b(),[t])}}):s.apply(b(),[t])),r.length&&((n=L(r)).forEach(function(e,t){n[t].mediaTypes.banner.sizes=e.sizes}),_?(a=0,o={adUnits:n,bidsBackHandler:function(){a||(a=1,j(n),googletag.pubads().isInitialLoadDisabled()&&s.apply(b(),[n.map(function(e){return I[e.code]})]))}},_?executeParallelAuctionAlongsidePrebid(d,{pbjsReq:o,amazonAllowed:!0,pbjsAllowed:!0,timeout:_.timeout}):pbjs_requestBids_wraper(o)):pbjs.que.push(function(){var t=0;pbjs_requestBids_wraper({adUnits:n,bidsBackHandler:function(e){t||(t=1,j(n),googletag.pubads().isInitialLoadDisabled()&&s.apply(b(),[n.map(function(e){return I[e.code]})]))}})}))))):(e.n||setTimeout(function(){e.n=1,g.display(i,e)},500),S.warn("display: no defineslot found for ",i))},l=!(b().refresh=function(e,t){e&&e.length||(e=function(e){for(var t=[],n=0;n<e.length;n++)e[n].data_affload||t.push(e[n]);return t}(googletag.pubads().getSlots())),S.info("refresh:",e);var n,i,a,o,r=h(e=m(e)).filter(function(e){return I[e.code]._displayed});e.length&&(e.forEach(function(e){S.info(["refresh() call ",e.getAdUnitPath(),e.getSlotElementId()])}),_?amazonReqBid(e,{timeout:_.timeout,fnCalBk:function(){s.apply(b(),[e,t])}}):s.apply(b(),[e,t])),r.length&&((n=L(r)).forEach(function(e,t){n[t].mediaTypes.banner.sizes=e.sizes}),_?(i=0,a=n.map(function(e){return I[e.code]}),r={adUnits:n,bidsBackHandler:function(){i||(i=1,j(n),s.apply(b(),[a,t]))}},_?(o={pbjsReq:r,amazonAllowed:!0,pbjsAllowed:!0,timeout:_.timeout},executeParallelAuctionAlongsidePrebid(a,o)):pbjs_requestBids_wraper(r)):pbjs.que.push(function(){pbjs_requestBids_wraper({adUnits:n,bidsBackHandler:function(e){j(n),s.apply(b(),[n.map(function(e){return I[e.code]}),t])}})}))}),u=!1,p=!(b().disableInitialLoad=function(){return l=!0,t.apply(window.googletag.pubads(),arguments)}),b().enableSingleRequest=function(){return p=!0,n.apply(window.googletag.pubads(),arguments)}):S.info("could not bind to gpt googletag api")},d=0,(d=Array.isArray(window.googletag.cmd)&&0<window.googletag.cmd.length?window.googletag.cmd[0]:d)?window.googletag.cmd[0]=function(){n(),d()}:window.googletag.cmd.push(n)),pbjs.que.push(function(){pbjs.HBReq=function(t){var n=0;googletag.pubads().getSlots().find(function(e){t==e.getSlotElementId()&&(n=e)}),n&&pbjs.hvrHbReq(n,function(){googletag.display(t),googletag.pubads().isInitialLoadDisabled()&&googletag.pubads().refresh([n])})};function n(e,t,n){var i=e,a=n,o=t,r={};this.getAdUnitPath=function(){return i},this.getSlotElementId=function(){return a},this.getSizes=function(){return o},this.setTargeting=function(e,t){S.info("setTargeting",e,t),r[e]=t},this.copyTargeting=function(t){S.info("copyTargeting",r),Object.keys(r).forEach(function(e){t.setTargeting(e,r[e])})}}var g=!0;pbjs.HBReq2=function(s,c,l,u){u=u||{},"string"==typeof c&&((c=c.split("x"))[0]=0|c[0],c[1]=0|c[1]),Array.isArray(c[0])||(c=[c]);var e=document.getElementById(l),t=u.igncss||0,p=(!e||t||(e.style.clear="both",e.style.textAlign="center"),new n(s,c,l)),t={dsblFailsSafe:u.dsblFailsSafe||0};W.affpbjs.hvrHbReq(p,function(e,t,n,i){S.info("HBReq2.bidsBackHandler()",{id:l,pos:i,bids:e,timedOut:t,auctionId:n});var a,o=u.slot||googletag.defineSlot(s,c,l).addService(googletag.pubads());if(p.copyTargeting(o),u.trgt&&(a=u.trgt||{},Object.keys(a).forEach(function(e){o.setTargeting(e,a[e])})),u.ignExp&&(o.ignExp=1),g&&(g=!1,googletag.enableServices()),googletag.display(l),G_options.debug&&W[N].aftl(l,"hb:googletag.display"),G_options.aff.pbExEnabled||googletag.pubads().isInitialLoadDisabled()&&(googletag.pubads().refresh([o]),G_options.debug)&&W[N].aftl(l,"hb:googletag.refresh"),u.sticky&&1==u.sticky&&"function"==typeof W[N].sticky)try{var r=c[0][0],d=c[0][1],f=u.extra||{};W[N].sticky({id:l,width:r,height:d,extra:f})}catch(e){}u.fn&&u.fn()},c,t)},pbjs.hvrHbReq=function(o,r,e,t){(t=t||{}).pos=(t.pos||"")+" hvrHbReq";try{var n=o.getAdUnitPath(),d=o.getSlotElementId(),i="",a=[],f="",s=0,c=0,l=G_adUnits.length,u="",p={"120x600":"168","120x601":"6321","120x602":"6322","160x600":"154","160x601":"2759","160x602":"2758","250x250":"165","300x50":"711","300x100":"457","300x250":"170","300x251":"1103","300x252":"1104","300x600":"529","320x50":"3055","320x75":"4564","320x100":"2988","336x280":"171","468x60":"1","468x61":"6323","468x62":"6324","728x90":"225","728x91":"6317","728x92":"6318","728x96":"3058","728x100":"4037","970x90":"2473","970x250":"2466","360x300":"10001","1100x400":"10002","1100x250":"10003"};for((a=d.split("_")).shift(),i=document.getElementById(a.join("_"))||"",c=0;c<l;c++)if(n==G_adUnits[c].aff.code){s=G_adUnits[c];break}if(s){"string"==typeof(e=e||k(o.getSizes()))&&((e=e.split("x"))[0]=0|e[0],e[1]=0|e[1],e=[e]),i&&(f=i.getElementsByTagName("iframe"))&&f[0]&&(g=f[0].getAttribute("width")||f[0].getAttribute("clientWidth")||"",b=f[0].getAttribute("height")||f[0].getAttribute("clientHeight")||"",g)&&b&&(u=g.replace("px","")+"x"+b.replace("px","")),u=parseInt(p[u]||0);var g,b,m=U(e,s.mediaTypes.banner.sizes);if(m&&m.length){for(var h,_,v=[],c=0,l=s.bids.length;c<l;c++){var y,C=L(s.bids[c]);if(C)if(C.aff&&C.aff.bsizes)U(m,C.aff.bsizes)&&(-1<C.bidder.indexOf("aol")&&(y=C.aff.bsizes[0][0]+"x"+C.aff.bsizes[0][1],u=parseInt(p[y]||0),C.params.sizeId=u),v.push(C));else{if(-1<C.bidder.indexOf("aol")){if(!u){C=0;continue}C.params.sizeId=u}v.push(C)}}0==v.length?r(0,0,0,"er-bdr"):(h=[{code:d,aff:{code:n},bids:v,mediaTypes:{banner:{sizes:m}}}],_=0,updateLogId(d,n),s.labelAny&&(h.labelAny=s.labelAny),s.labelAll&&(h.labelAll=s.labelAll),o.ignExp=1,pbjs_requestBids_wraper({adUnits:h,bidsBackHandler:A,timeout:G_options.pbjsconf.bidderTimeout},1,t),t.dsblFailsSafe?S.info("Failsafe-disabled "+d):setTimeout(function(){A(0,0,0,"er-tmo")},G_options.pbjsconf.bidderTimeout+200))}else r(0,0,0,"er-sz")}else r(0,0,0,"er-cfg");function A(e,t,n,i){if(S.info("hvr.bidsBackHandler()",{id:d,bids:e,timedOut:t,auctionId:n,pos:i=i||"",done:_}),!_){G_options.debug&&W[N].aftl(d,"pbjs.auctionEnd"),_=1;var a=pbjs.getAdserverTargeting([d]);if(a=a[d]||0){if(G_options.debug&&(a.id0=d),w)try{a=W[N].bidMod.getTargetingForSlot(o,a)}catch(e){}Object.keys(a).map(function(e,t){o.setTargeting(e,a[e]),S.info("set key value "+d+" ["+e+" = "+a[e]+"]")})}r(a,t,n,i)}}}catch(e){S.error(o,e)}}})}"use strict";var affinitytag_id_to_name=function(e){var t="affinitytag";if(window[t]&&window[t].getReq){t=window[t].getReq();if(t&&t[e]&&t[e].nm)return t[e].nm}return e},updateLogId=function(e,t,n){},getDivIdToAuCode=function(){},ImpressionLog=function(a,o){function n(e,t,n){var i=o.createElement("img");i.width=i.height=1,i.src=e+"&tt=img",i.onload=i.onerror=function(){n(),n=r,i.onload=null,i.onerror=null,i=null}}var r=function(){},d=!0,f=2e3,s=a.navigator.sendBeacon?function(e,t,n){return!!a.navigator.sendBeacon(e+"&tt=bcn",t)&&(n(),!0)}:r,c=a.XMLHttpRequest&&"withCredentials"in new a.XMLHttpRequest?function(e,t,n){try{var i=new a.XMLHttpRequest;i.withCredentials=!0,i.timeout=f,i.open("POST",e+"&tt=xhr",d),i.setRequestHeader("Content-Type","text/plain"),i.onreadystatechange=function(){4==i.readyState&&(n(),i=null)},i.send(t)}catch(e){return!1}return!0}:r;var t=new function(){var i={},e=0,a=this;this.add=function(e,t){var n=this._getKey();return i[n]={url:e,data:t,fnDone:function(){a._done(n)}},i[n].f},this._getKey=function(){return e++},this._done=function(e){i[e]&&i[e].url&&(i[e].url=0,setTimeout(function(){try{delete i[e]}catch(e){}},2))},this.sendAll=function(e){for(var t in e=e||"",i)i.hasOwnProperty(t)&&(!(t=i[t]).url||s(t.url+e,t.data,t.fnDone)||c(t.url+e,t.data,t.fnDone)||n(t.url+e,t.data,t.fnDone))}};return window.addEventListener("beforeunload",function(){d=!1,f=500,t.sendAll("&ex=bu")}),function(e){t.add(e,""),t.sendAll()}}(window,document),version="v3-20231024.0",initlog=!0,flags={pbi:0,strp:0,sndfp:0,sndfptp:0},proto="https:"===location.protocol?"https://":"http://",D={},O={pbatmo:G_options.aff.log.timeout,lgbrsp:G_options.aff.log.lgbrsp,afelog:0|G_options.aff.log.afelog,afulog:G_options.aff.log.url,afuuid:"",pub:G_options.aff.log.pubid,dispIdTm:{}},logUrl=proto+O.afulog+"&vj="+version+"&pub="+O.pub+"&",_logBuf={d:[],st:0,mx:4},_logBufIndex=0,tmoLogged={},winLogged={},log=function(e){if(O.afelog)if(1===O.afelog)ImpressionLog(logUrl+e+"&cb="+timeStamp());else if(2===O.afelog)try{window._aff_pob.push(function(){ImpressionLog(logUrl+e+"&cb="+timeStamp())})}catch(e){}},paramStr=function(e,t,n){var i=[];return isArr(e)&&(e=en(e.join(""))),isObj(e)?each(e,n?function(e,t){i.push(n+"["+e+"]="+en(t))}:function(e,t){i.push(e+"="+en(t))}):i.push(en(e)),t&&each(flags,function(e,t){i.push(e+"="+en(t))}),i.join("&")},isArr=function(e){return isA(e,"Array")},isObj=function(e){return isA(e,"Object")},en=function(e){try{return encodeURIComponent(e)}catch(e){return e.message}},_shortNames={bidderCode:"bdcd",requestTimestamp:"reqt",responseTimestamp:"rest",timeToRespond:"trsp",statusMessage:"sms",adUnitCode:"au"},resetFlags=function(){D={},flags.sndfp=0,flags.pg=(flags.pg||0)+1,flags.afuuid=flags.afuuid+"_"+flags.pg,flags.init=timeStamp()};function timeStamp(){return(new Date).getTime()}function isA(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function isFun(e){return isA(e,"Function")}function each(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&!isFun(e[n])&&t.call(e[n],n,e[n])}G_options.aff.afflog2&&(G_options.aff.afflog2=log),flags.afuuid=Math.random()+"_"+timeStamp(),flags.init=timeStamp(),_logBuf.mx=+(O.lbmx||4);var defSizeMapping=[{labels:["desktop"],mediaQuery:"(min-width: 1200px)"},{labels:["tablet"],mediaQuery:"(min-width: 768px) and (max-width: 1199px)"},{labels:["phone"],mediaQuery:"(min-width: 0px) and (max-width: 767px)"}];function getDeviceDetails(e){var e=e.getConfig().sizeConfig||0,t="pub",n="desktop";return e||(e=defSizeMapping,t="sys"),e.forEach(function(e,t){window.matchMedia(e.mediaQuery).matches&&(n=e.labels)}),{dv:n,dvtp:t}}function affLogging(r){function _(e){var t=e.bidderCode||e.bidder,n=(e.originalCpm||"")+"-"+(e.originalCurrency||""),i=G_options.pbjsconf.priceGranularity,a="";if("object"==typeof i)a=e.pbCg;else switch(i){case"auto":a=e.pbAg;break;case"low":a=e.pbLg;break;case"med":a=e.pbMg;break;case"high":a=e.pbHg;break;case"dense":a=e.pbDg}i={ocpm:e.cpm,acpm:a||e.cpm,tmo:e.timeToRespond,pbcd:"",bocpm:n},x(e.adUnitCode,"afPBName",t,i)}function v(e){return e.cpm||0}function y(t,e,n){return t&&("*"===e?each(t,function(e,t){n[e]=t}):e.map(function(e){n[e]=t[e]||""})),n}function C(e,t){return(flags.sndfp?1:0)|(w(e,"afPBName",t,"dly")?2:0)|(O.dispIdTm[e]?4:0)}function A(e){var t=e.bidder||e.bidderCode,t=bidderIdMapping[t]||"";return L[e.requestId]?s(L[e.requestId],t):n(e,e.adUnitCode)}function S(e){var n={};each(e,function(e,t){n[_shortNames[e]||e]=t}),_logBufIndex++,n.i=_logBufIndex,void 0!==e.aucid&&(n.aucid=e.aucid),_logBuf.d.push(n),0===_logBuf.st&&(_logBuf.st=1,setTimeout(function(){var e=_logBuf.d,t=[];for(_logBuf.d=[],_logBuf.st=0;e.length;)t.push(e.shift()),!(e.length&&(t[0].siteid||"")!=(e[0].siteid||""))&&_logBuf.mx!==t.length&&0!==e.length||(log(paramStr({t:"mix",siteid:t[0].siteid||siteid,tmo:O.pbatmo,d:JSON.stringify(t)},1)),t=[])},300))}var x=function(e,t,n,i){if(D[e]=D[e]||{},D[e][t]=D[e][t]||{},D[e][t][n])for(var a in i)i.hasOwnProperty(a)&&(D[e][t][n][a]=i[a]);else D[e][t][n]=i;D[e].n=D[e].n||{},D[e].n[t]=(D[e].n[t]||0)+1},w=function(e,t,n,i){var a=!1;return D[e]&&D[e][t]&&D[e][t][n]&&(e=D[e][t][n],i?e.hasOwnProperty(i)&&(a=e[i]):a=e),a},d={},i={},j=(updateLogId=function(e,t,n){i[e]=t;n=n||j(t);n&&(d[e]=n)},getDivIdToAuCode=function(e){return i[e]||!1},function(t){var e=t;try{if(d[t])return d[t];var n=t,i=t;googletag&&googletag.apiReady?googletag.pubads().getSlots().forEach(function(e){t!=e.getSlotElementId()&&t!=e.getAdUnitPath()||(n=e.getSlotElementId(),"/"!=(i=e.getAdUnitPath()).substr(0,1)&&(i="/"+i))}):i=affinitytag_id_to_name(t);for(var a=0,o=G_adUnits.length;a<o;a++){var r=G_adUnits[a];if((r.aff.id==n||r.aff.code==i)&&r.aff.lgcode)return d[t]=r.aff.lgcode,r.aff.lgcode}}catch(e){}return e||(d[e=t]=e),e}),s=function(e,t){var n=0,i=e.bidder||e.bidderCode||"";return e.params&&("onetag"===i?e.params.ext&&e.params.ext.placement_name&&(n=e.params.ext.placement_name):e.params[t]&&(n=e.params[t])),n},n=function(e,t){var n=e.bidder||e.bidderCode,i=bidderIdMapping[n]||"",a=0;if(G_adUnits.forEach(function(e){e.aff.id==t&&e.bids.forEach(function(e){n==e.bidder&&(a=s(e,i))})}),!a){var o=t;if(googletag&&googletag.apiReady){for(var r=googletag.pubads().getSlots(),d=0,f=r.length||0,d=0;d<f;d++)if(t==r[d].getSlotElementId()){o=r[d].getAdUnitPath();break}}else o=affinitytag_id_to_name(t);G_adUnits.forEach(function(e){e.aff.code==o&&e.bids.forEach(function(e){n==e.bidder&&("onetag"==e.bidder?e.params.ext&&e.params.ext.placement_name&&(a=e.params.ext.placement_name):a=e.params[i])})})}return a},e=["bidRequested","bidResponse","bidTimeout","bidWon","auctionInit"],f=1;function I(e,t,n,i){t=t||0;var a=[],e=(((e=e||[])||G_adUnits).forEach(function(e,t){a.push(l(e.aff.lgcode))}),getDeviceDetails(r)),o="pub"==e.dvtp?[e.dv]:[];f&&(f=0,logUrl+=["lbl="+encodeURIComponent(addGeoSectionLabels(o).join(",")),"dc="+n,"dv="+e.dv,"dvtp="+e.dvtp,"siteidOrg="+t].join("&")+"&"),log(paramStr({t:"init",siteid:t,aucid:i||"",aus:a.join(","),tmo:O.pbatmo,r:"",h:""},1))}c={};var c,l=function(e,t,n){if(c[e])return c[e];n=n||G_adUnits;for(var i=0,a=G_adUnits.length;i<a;i++)if(e===n[i].aff.id)return c[e]=n[i].aff.lgcode,c[e];if(!t)if(googletag&&googletag.apiReady){for(var o=googletag.pubads().getSlots(),r=0,d=o.length||0,r=0;r<d;r++)if(e==o[r].getSlotElementId()){t=o[r].getAdUnitPath();break}}else t=affinitytag_id_to_name(e);for(t&&"/"!=(t+="").charAt(0)&&(t="/"+t),i=0,a=G_adUnits.length;i<a;i++)if(t===n[i].aff.code)return c[e]=n[i].aff.lgcode,c[e]},G={};function B(e,t,n){return t in e?e[t]:n}function N(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[window[pbjsName].bidderAlias[t]||t]=e[t]);return JSON.stringify(n)}function k(e,t,n){var i="",a=0,o=0,r=t;try{if(googletag&&googletag.apiReady){for(var d=googletag.pubads().getSlots(),a=0,o=d.length;a<o;a++){var f=d[a];if(""==i&&(e==f.getAdUnitPath()||e==f.getSlotElementId())){i=f.getAdUnitPath();break}}for(a=0,o=n.length;a<o;a++)if(i==n[a].aff.code&&n[a].aff.siteid){r=n[a].aff.siteid;break}}else console.warn("false == googletag.apiReady")}catch(e){}return r}function U(){E=0;var n=timeStamp(),i=[];Object.keys(L).forEach(function(e){var t=L[e];t&&t.tm&&10<=n-t.tm&&i.push(e)}),i.forEach(function(e){delete L[e]})}var L={},E=0;function a(e,t){var n=JSON.parse(JSON.stringify(t));switch(e){case"auctionInit":E=E||window.setTimeout(U,1e4);break;case"bidRequested":var i="",a={},o="",r={},d=[];each(n.bids,function(e,t){i=t.adUnitCode,a={},o=t.bidder;var n=timeStamp();a.requestTimestamp=n-flags.pbi,a.bidderCode=o,x(i,i,o,a),L[t.bidId]={bidder:t.bidder,params:t.params||{},tm:n},0===B(r,i,0)&&(r[i]=1,d.push({aff:{lgcode:i}}))}),0===B(G,n.auctionId,0)&&(G[n.auctionId]=1,f=k(i,siteid,G_adUnits),I(d,f,dc,n.auctionId)),x(i,i,o,{aucid:n.auctionId});break;case"bidResponse":var i=n.adUnitCode,f=n.bidderCode,s=v(n),c=((a=y(n,["bidderCode","cpm","acpm","timeToRespond","statusMessage"],{})).bocpm=(n.originalCpm||"")+"-"+(n.originalCurrency||""),G_options.pbjsconf.priceGranularity),l="";if("object"==typeof c)l=n.pbCg;else switch(c){case"auto":l=n.pbAg;break;case"low":l=n.pbLg;break;case"med":l=n.pbMg;break;case"high":l=n.pbHg;break;case"dense":l=n.pbDg}x(i,"afPBName",f,{ocpm:n.cpm,acpm:l||n.cpm,tmo:n.timeToRespond,pbcd:"",bocpm:a.bocpm}),n.cpm||(s=0);c=C(i,f);c&&(a.dly=1,a.dlyc=c,x(i,"afPBName",f,{dly:1,dlyc:c})),x(i,"bidResponse",f,a),O.lgbrsp&&(a.t="bdres",a.au=j(i),a.acpm=l||s,a.cpm=s,a.pbcd=w(i,"afPBName",f,"pbcd"),a.siteid=k(i,siteid,G_adUnits),a.aucid=n.auctionId,a.pubplcid=A(n),a.bidderCode=window[pbjsName].bidderAlias[a.bidderCode]||a.bidderCode,S(a));break;case"bidWon":try{var u=n.adId+":"+n.auctionId;if(winLogged[u])return;winLogged[u]=1;var i=n.adUnitCode,p={t:"bdwon"};p.au=j(i),p.won=window[pbjsName].bidderAlias[n.bidder]||n.bidder,p.wc=n.cpm,p.tmo=O.pbatmo,p.winId=u,p.reqn=w(i,"n","bidRequested"),p.rspn=w(i,"n","bidResponse"),p.pubplcid=A(n),p.aucid=n.auctionId,_(n),p.siteid=k(i,siteid,G_adUnits),p.d=N(D[i].afPBName),log(paramStr(p,1))}catch(e){}break;case"bidTimeout":var g=[],b="",m="",c=Array.isArray(n)?n:[n],h={};each(c,function(e,t){var n,i=t.auctionId+":"+t.bidder+t.adUnitCode;tmoLogged[i]||(tmoLogged[i]=1,g.push(t.bidder+":"+j(t.adUnitCode)+":"+A(t)),m=t.auctionId,i=t.adUnitCode,n=t.bidder,x(i,"afPBName",n,{dly:1}),D[i].afPBName[n].dlyc=C(i,n),n=k(i,siteid,G_adUnits),h[n]||(h[n]=[]),h[n].push(t.bidder+":"+j(t.adUnitCode)+":"+A(t)))}),0!=g.length&&("bidTimeout"==e&&(b="bdtmo"),Object.keys(h).forEach(function(e){var t=h[e];S({t:b,siteid:e,tmo:O.pbatmo,aucid:m,d:t.join()})}))}}for(var t=0,o=e.length;t<o;t++)!function(t){r.onEvent(t,function(e){a(t,e)})}(e[t])}function getUTCSec(){return(new Date).getTime()/1e3}function onReady(e){var t=document,n="readyState",i="attachEvent";"interactive"===t[n]||"complete"===t[n]?e():t[i]?t[i]("onreadystatechange",e):t.addEventListener("readystatechange",e)}var initAfInterval=function(){var u=new function(){function e(){a.forEach(function(e,t){e(document[i])})}var t,n,i="",a=[];this.isVisible=function(){return!document[i]},this.addOnChange=function(n){var i=0;a.forEach(function(e,t){e===n&&(i=1)}),0===i&&a.push(n)},n="",void 0!==document.hidden?(t="hidden",n="visibilitychange"):void 0!==document.msHidden?(t="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),document.addEventListener(n,e,!1),i=t};function p(a){var o,r;this.getVisPerc=function(){var e=a.getBoundingClientRect(),t=document.documentElement,n=[e.left,e.top,e.bottom,document.documentElement.clientHeight].join(),i=window.innerHeight||t.clientHeight,t=window.innerWidth||t.clientWidth;return o!=n&&(o=n,r=0<e.left&&0<e.top&&e.bottom<=i&&e.right<=t?100:((n={l:0,t:0,b:0,r:0}).l=0<e.left?e.left:0,n.t=0<e.top?e.top:0,n.b=i<e.bottom?i:e.bottom,n.r=t<e.right?t:e.right,i=e.height*e.width,0<(t=100*((n.b-n.t)*(n.r-n.l))/i)?t:-1)),r}}function t(e){Logger.log("Refresh: new AfInterval("+e.id+")");var t,n=e.fn||!1,i=e.id||"",a=e.delaySec||60,o=e.maxCall||5,r=0,d="minVisblePerc"in e?e.minVisblePerc:60,f=1,s=getUTCSec(),c=document.getElementById(i),l=c?new p(c):null;d|=0,t=Array.isArray(a)?a:[0+a],a=t[0],i?(m++,this.isDone=function(){return o<=r},this.stop=function(){f=0},this.start=function(){f=1},this.checkNRefresh=function(e){if(!c){if(!(c=document.getElementById(i)))return;l=new p(c)}e=e||getUTCSec(),f&&c&&r<=o&&u.isVisible()&&s+a<=e&&(e=l.getVisPerc(),d<e)&&(s=getUTCSec(),!(r<o)||(r++,Logger.log("Refresh: chkNRef",i,r,"/",o),n({curCall:r,totCall:o,visPerc:e,delaySec:a}),a=t[r%t.length],r==o))&&(delete b[i],m--)},b[i]=this,h=h||setInterval(g,500)):f=0}function g(){if(m<=0)Logger.log("Refresh: All done[1]"),clearInterval(h);else if(0<m&&u.isVisible()){var e,t=getUTCSec();for(e in b)b.hasOwnProperty(e)&&b[e].checkNRefresh(t)}}function e(){e.called||(e.called=1,setTimeout(function(){var t;addEventListener("scroll",(t=(new Date).getTime(),function(){var e=(new Date).getTime();t+1e3<e&&(g(),t=e)}))},2e3))}u.addOnChange(g),G_options.aff&&!G_options.aff.hbrefscrolloff&&onReady(e);var b={},m=0,h=0,n={};return function(e){if(e.id=e.id||"",""!==e.id)return n[e.id]||(n[e.id]=new t(e)),n[e.id]}}(),concentCheckSum=(G.refreshInViewBySlot=function(){var e=!1;return G_options.rfrall&&("object"!=typeof G_options.rfrall&&(G_options.rfrall={enabled:!0}),G_options.rfrall.enabled)&&((e={}).ignore=G_options.rfrall.ignore||[],e.conf=G_options.rfrall.conf||{delaySec:90,maxCall:5}),function(t){var n=t.getSlotElementId(),i=t.getAdUnitPath(),a=0,o=0;if(G_adUnits.forEach(function(e,t){(n===e.aff.id||i===e.aff.code&&e.aff.dynamicId)&&e.aff.refsh&&(e.aff.refsh.enable?(a=e.aff.refsh).id=n:o=1)}),!o){if(!a&&e){if(-1<e.ignore.indexOf(n))return;(a=e.conf).id=n}a&&(a.fn=function(e){t.setTargeting("afrf",e.curCall),googletag.cmd.push(function(){G_options.aff.pbExEnabled?googletag.pubads().refresh([t]):window[pbjsName].que.push(function(){window[pbjsName].hvrHbReq(t,function(){googletag.pubads().refresh([t])})})})},initAfInterval(a))}}}(),void 0===W[N].concentCheckSum&&(W[N].concentCheckSum={startPbjs:!1,googlefcSet:{},affArBidderIds:[],lI:!1}),{}),aff_tcf_bidder_filter="aff_tcf_bidder_filter",enableTcf="enableTcf",expectedFromGoogle="expectedFromGoogle",retryInMs="retryInMs";function updateTcfAsPerConfig(e){e=e.tcfv2;concentCheckSum.enableTcf=!0,e.retryInMs&&50<e.retryInMs&&e.retryInMs<100&&(concentCheckSum.retryInMs=e.retryInMs),e.hasOwnProperty("expectedFromGoogle")&&"boolean"==typeof e.expectedFromGoogle&&(concentCheckSum.expectedFromGoogle=e.expectedFromGoogle),e.hasOwnProperty(aff_tcf_bidder_filter)&&"number"==typeof e.aff_tcf_bidder_filter&&(concentCheckSum.aff_tcf_bidder_filter=e.aff_tcf_bidder_filter)}function isMobile(){return!(900<(screen.width<screen.height?screen.width:screen.height))&&("ontouchstart"in window||window.navigator.msMaxTouchPoints)}function parseFloat2(e,t){e=parseFloat(e);return e=isNaN(e)?t:e}function getFilteredAdunitsV2(e){var r=G_options.aff.bdrdtl2||{},d=!!e.gdpr,f=!!e.ccpa,s=0,c={},t=[];return d||f?Array.isArray(G_adUnitsOrg)&&(G_adUnitsOrg.forEach(function(a){var o,e;Array.isArray(a.bids)&&(o=[],a.bids.forEach(function(e){var t="",n=e.bidder,i=r[n]||0;i?(d&&!i.gdpr&&(t+=" GDPR-not-suported"),f&&!i.ccpa&&(t+=" CCPA-not-suported"),""!=t?(c[n]=(c[n]||0)+1,s++,Logger.warn("hbcfg Bidder-filtered Au="+a.aff.code+" Bidder="+n+t)):o.push(e)):Logger.error("hbcfg Bidder-filtered Au="+a.aff.code+" Bidder="+n+(t=" BdrDTl-not-found"))}),o.length)&&((e=a).bids=o,t.push(e))}),Logger.info("hbCfg "+s+" bidders-filtered ",c)):(Logger.info("hbCfg bidder-Filter not-aplicable"),t=Array.isArray(G_adUnitsOrg)?G_adUnitsOrg:[]),t}function aff_hb_init(e,t,n,i,a,o,r){var d=G_options.aff.geo_filter&&G_options.aff.geo_filter.enabled;d?Logger.info("hbCfg geo_filter",G_options.aff.geo_filter):Logger.info("hbCfg geo_filter not-aplicable"),(d&&"3"==G_options.aff.geo_filter.version?aff_hb_init_v3:aff_hb_init_v2)(e,t,n,i,a,o,r)}function aff_hb_init_v2(n,i,a,o,e,t,r){var d,f,s;G_options.aff.geo_filter&&G_options.aff.geo_filter.enabled?(d=0,f=(new Date).getTime(),(s=0|G_options.aff.geo_filter.timeout)<=0&&(s=500),__afflib.hbGetCnf=function(e){var t={action:"-",hbCfg:e,loadTime:(new Date).getTime()-f,"cfg.timeout":s};e&&e.geo?(W[N]._hbCfg=e,Object.freeze&&(Object.freeze(W[N]._hbCfg.geo),Object.freeze(W[N]._hbCfg)),d?(t.action="data-delayed",Logger.warn(t)):(t.action="data",Logger.info(t)),G_options.aff.geo_filter.data_center=[e.geo.cc||"",(e.geo.cn||"").replace(" ","_")],W[N].updGeoSecLbl(),G_adUnits=getFilteredAdunitsV2(e),prepreAfGeoCmd(),aff_hb_init_impl(n,i,a,o,G_adUnits,G_options,r)):d||(t.action="timeout",Logger.error(t)),d||(d=1,aff_hb_init_impl(n,i,a,o,G_adUnits,G_options,r))},W[N]._hbCfg&&W[N]._hbCfg.geo?__afflib.hbGetCnf(W[N]._hbCfg):(setTimeout(function(){__afflib.hbGetCnf(!1)},s),loadScript("https://hbs.ph.affinity.com/app/cfg.php?d="+G_options.aff.hbConfName))):aff_hb_init_impl(n,i,a,o,G_adUnits,G_options,r)}function aff_hb_init_v3(e,t,n,i,a,o,r){var d,f,s,c;aff_hb_init_impl(e,t,n,i,G_adUnits,G_options,r),G_options.aff.geo_filter&&G_options.aff.geo_filter.enabled&&(d=0,f=(new Date).getTime(),(s=0|G_options.aff.geo_filter.timeout)<=0&&(s=500),c="hbGetCnf",e="","function"==typeof __afflib[c]&&(e="&fn=__afflib."+(c=[c,(""+Math.random()).replace(".","")].join("_"))),__afflib[c]=function(e){var t={action:"-",hbCfg:e,loadTime:(new Date).getTime()-f,"cfg.timeout":s};e&&e.geo?(W[N]._hbCfg=e,Object.freeze&&(Object.freeze(W[N]._hbCfg.geo),Object.freeze(W[N]._hbCfg)),d?(t.action="data-delayed",Logger.warn(t)):(t.action="data",Logger.info(t)),G_options.aff.geo_filter.data_center=[e.geo.cc||"",(e.geo.cn||"").replace(" ","_")],W[N].updGeoSecLbl(),addPartialConsentBiddersV3(e),prepreAfGeoCmd()):d||(t.action="timeout",Logger.error(t)),d=d||1},W[N]._hbCfg&&W[N]._hbCfg.geo?__afflib[c](W[N]._hbCfg):(setTimeout(function(){__afflib[c](!1)},s),loadScript("https://hbs.ph.affinity.com/app/cfg.php?d="+G_options.aff.hbConfName+e)))}function prepreAfGeoCmd(){if(Array.isArray(W[N].affGeoCmd)&&!W[N].affGeoCmd.isReady){W[N].affGeoCmd.isReady=!0;var t=W[N]._hbCfg,e=function(e){try{e.called=!0,e(t)}catch(e){}};W[N].affGeoCmd.push=e,Logger.info("afGeoCmd",t);for(var n=0,i=W[N].affGeoCmd.length;n<i;n++)e(W[N].affGeoCmd[n])}}function addPartialConsentBiddersV3(e){var t=W[N].cmpStatus(),e=Object.assign({},e);e.gdpr=t.gdprApplies,e.ccpa=t.uspapiApplies,addPartialConsentBiddersV3Impl(e)}concentCheckSum[enableTcf]=!1,concentCheckSum[expectedFromGoogle]=!1,concentCheckSum[retryInMs]=100,concentCheckSum[aff_tcf_bidder_filter]=2;var addPartialConsentBiddersV3ImplCalled=0;function addPartialConsentBiddersV3Impl(r){if(!addPartialConsentBiddersV3ImplCalled){addPartialConsentBiddersV3ImplCalled=1;try{var d=G_options.aff.bdrdtl3,f=!r.gdpr,s=!r.ccpa,c="",l="",t=(r.geo&&(c=r.geo.cc||"",l=r.geo.cn||""),{}),n=0;G_adUnitsFiltered.forEach(function(e,a){var o=0;e.bids.forEach(function(e,t){e.aff=e.aff||{};var n=e.bidder,i=0,e=e.aff.excgeo||0;Array.isArray(e)&&0<e.length&&(-1<e.indexOf(c)||-1<e.indexOf(l))?Logger.warn("hbCfg Extra-Bidder-Removed tp=geo-filter bdrCode="+n):(f&&s?i="gdpr-cpa-not-required":r.gdpr&&d[n].gdpr?i="gdpr-supported":r.ccpa&&d[n].ccpa&&(i="ccpa-supported"),i?(o=!0,G_adUnitsFiltered[a].bids[t].aff.consOk=1,Logger.info("hbCfg Extra-Bidder-Added-P1 aff.consOk tp="+i+" bdrCode="+n)):(G_adUnitsFiltered[a].bids[t].aff.consOk=0,i=r.gdpr?"gdpr-not-suported":r.ccpa?"ccpa-not-suported":"error",Logger.warn("hbCfg Extra-Bidder-Removed tp="+i+" bdrCode="+n)))}),o&&(n=!0,t[e.code]=a,t[e.id]=a,e=extra.hvr_copy_config[e.code]||0)&&(t[e]=a)}),n&&G_adUnits.forEach(function(n,i){var e=null;n.aff.code in t?e=t[n.aff.code]:n.aff.id in t&&(e=t[n.aff.id]),null!==e&&G_adUnitsFiltered[e].bids.forEach(function(e,t){e.aff.consOk&&(G_adUnits[i].bids.push(e),Logger.info(["hbCfg extra-bidder-added-P2 ",n.aff.code,n.aff.id].join(" "),e))})})}catch(e){Logger.error("hbCfg-error",e)}}}function ensureBidersByPrivacy(e){var t=W[N].cmpStatus(),n=t.gdprApplies,i=t.uspapiApplies;if(Logger.info({cmpData:t}),n||i){var a,o,r={},d=(n&&(a=W[N].tcfv2.getGvlCode(),o=W[N].tcfv2.getCachedConcents().vendor.consents),G_options.aff&&G_options.aff.bdrdtl3&&(r=G_options.aff.bdrdtl3),!1);G_options.aff&&2==G_options.aff.gpid&&(d=!0);for(var f=0,s=e.length;f<s;f++){var c,l=e[f];if(d&&(c=document.getElementById(l.code))&&c.dataset&&(c=c.dataset.gpid)&&(l.ortb2Imp={ext:{gpid:c,data:{pbadslot:c}}}),l.bids&&l.bids.length){for(var u=[],p=0,g=l.bids.length;p<g;p++){var b=l.bids[p],m=0,h=0,_="";!n||a[b.bidder]&&!0===o[a[b.bidder]]?m=1:_="tcfv2",!i||(r[b.bidder]||{}).ccpa?h=1:_+=" ccpa",h&&m?u.push(b):Logger.warn(["Ignore2 "+_+"-exclude ",b.bidder,l.code])}e[f].bids=u}}}return e}var aff_hb_init_impl_call_count=0;function aff_hb_init_impl(t,p,n,g,i,f,d){function a(e){var c;e&&e.aff&&e.aff.bidModifier&&(c=e.aff.bidModifier,pbjs.bidderSettings={standard:{storageAllowed:!0,bidCpmAdjustment:function(e,t){var n,i,a,o,r,d,f=e,s="none";return c[t.bidderCode]&&(c[t.bidderCode][t.adUnitCode]?s=+c[t.bidderCode][t.adUnitCode]:c[t.bidderCode]["*"]&&(s=+c[t.bidderCode]["*"])),"none"==s&&c.fixed_range&&(d=c.fixed_range,n=getDivIdToAuCode(t.adUnitCode)||t.adUnitCode,i=d.au||["-"],a=d.bdr||["-"],o=d.min||0,r=d.max||0,d=d.cpm||0,"*"==i[0]||-1<i.indexOf(n))&&("*"==a[0]||-1<a.indexOf(t.bidderCode))&&o<=f&&f<=r&&(f=d+f/100),""===s||isNaN(s)||(f=e*s),Logger.info("bidCpmAdjustment( GLOBAL ) ",{auctionId:t.auctionId,bidderCode:t.bidderCode,adUnitCode:t.adUnitCode,bidCpm:e,bidMultiplier:s,newBid:f}),f}},criteo:{storageAllowed:!0}})}function e(a){var o={},r=[];return d.hvr_copy_config={},a.forEach(function(e,t){var n,i=e.aff.code;e.bids&&e.bids.length&&"hvr_copy_config"===e.bids[0].bidder?(n=e.bids[0].params.dfp_au,o[n]?a[t].bids=s(o[n]):(a[t].bids=[],r.push({idx:t,dfp_au:n})),d.hvr_copy_config[n]=a[t].aff.code):o[i]=e.bids||[]}),r.forEach(function(e,t){o[e.dfp_au]?a[e.idx].bids=s(o[e.dfp_au]):a[e.idx].bids=[]}),a}function s(t){try{return JSON.parse(JSON.stringify(t))}catch(e){return Logger.error(["Fail to clone "+e,t]),t}}function o(e){try{var t;"projectagora"in f.aff.bdrdtl3&&(t={bidders:["projectagora"],config:{schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"affinity.com",sid:f.bidderconf.config.schain.config.nodes[0].sid,hp:1},{asi:"projectagora.com",sid:"107825",hp:1}]}}}},e.setBidderConfig(t),Logger.info("ProjectAgora schain",t))}catch(e){}}function r(e){try{var t,n;f.aff.bidderOwner&&f.aff.bidderOwner.ys&&Array.isArray(f.aff.bidderOwner.ys)&&(t=f.aff.bidderOwner.ys,Array.isArray(t))&&0!==t.length&&t.includes("oftmedia")&&(n={bidders:["oftmedia"],config:{schain:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[{asi:"152media.info",sid:"152M923",hp:1}]}}}},e.setBidderConfig(n),Logger.info("Oftmedia schain",n))}catch(e){}}function c(e,t){try{for(var n,i=t.bidders,a=i.length,o=[],r=0;r<a;r++)i[r]in f.aff.bdrdtl3&&o.push(i[r]);Array.isArray(o)&&0!==o.length?(t.bidders=o,n=t,e.setBidderConfig(n),Logger.info("Custom Bidder Level Schain",n)):Logger.warn("Given bidders in config are invalid or not added | Valid bidder list is not array")}catch(e){}}function l(e){if(f.pbjsconf.userSync&&Array.isArray(f.pbjsconf.userSync.userIds))for(var t,n,i,a=0,o=f.pbjsconf.userSync.userIds,r=0,d=o.length,r=0;r<d;r++)if("id5Id"==o[r].name)return t=W.encodeURIComponent||W.encodeURI,i=W.navigator.userAgent,n=["9="+t(p.domain)],i&&(n.push("12="+t(W.navigator.userAgent)),a=1),W[N]._hbCfg&&W[N]._hbCfg.geo&&((i=W[N]._hbCfg.geo).ip4?(n.push("10="+t(i.ip4)),a=2):i.ip6&&(n.push("11="+t(i.ip6)),a=2)),n.length&&(f.pbjsconf.userSync.userIds[r].params.pd=W.btoa(n.join("&"))),f.debug&&Logger.info("id5",e,n,JSON.stringify(f.pbjsconf.userSync.userIds[r])),a;return 0}function u(){var n=f.pbjsName;t.googlefc=t.googlefc||{},t.googlefc.callbackQueue=t.googlefc.callbackQueue||[],t.googlefc.callbackQueue.push({CONSENT_DATA_READY:function(){Logger.info("concentLogs : CONSENT DATA READY ",n),W[N].tcfv2.getConcentsWaitForApi(function(e){var t=W[N].tcfv2.updateConsentManagement(W);"object"==typeof t&&0<Object.entries(t).length&&(Logger.info("concentLogs Concent found : ",t,n),f.pbjsconf.consentManagement=t,pbjs.que.push(function(){pbjs.setConfig(f.pbjsconf)})),pbjs_requestBids_wraper(null,null,null)},function(){Logger.error("concentLogs tcf found but not responsing.",n)},{vendorIds:W[N].concentCheckSum.affArBidderIds}),W[N].uspapi.init_uspapi()}})}if(aff_hb_init_impl_call_count++,f.pbjsName=n,t[n]=t[n]||{},t[n].que=t[n].que||[],t[n].bidderAlias=t[n].bidderAlias||{},(d=d||{}).gpt_mode=d.gpt_mode||0,d.ignbIniLoadDIsable=d.ignbIniLoadDIsable||!1,Logger.info("aff_hb_init_impl",{call_cnt:aff_hb_init_impl_call_count,G_adUnits:i,G_options:f,extra:d}),f.aff&&f.aff.afBidModifier&&f.aff.afBidModifier.enabled&&(W[N].bidMod&&"function"==typeof W[N].bidMod.setConf?W[N].bidMod.setConf(f):f.aff.afBidModifier.enabled=!1),f.pbjs=f.pbjs||{},f.aff=f.aff||{},f.aff.trgt_use_div_id=f.aff.trgt_use_div_id||!1,i=e(i),f.pbjsName&&"affpbjs"===f.pbjsName&&W[f.pbjsName]){let e="affadapter";W[f.pbjsName].affCBidPF("gbc",{},!0)&&(e=W[f.pbjsName].affSG("gbc",f.aff.affinitytag.affdm)),W[f.pbjsName].affsdbc(e),W[f.pbjsName].affAAb(f)&&W[f.pbjsName].affibc(i,f.aff.affinitytag.affdm)}var b,m,h,_,v,y,C,A,S,x,w,j=i,I={},B=(d.ivtChk=d.ivtChk||{enabled:!1},j.forEach(function(e,t){j[t].code=f.aff.trgt_use_div_id?j[t].aff.id:j[t].aff.code;j[t].bids.forEach(function(e,t){e.aff&&e.aff.ivtChk&&(d.ivtChk.enabled=!0)})}),d.tcfv2&&d.tcfv2.enable&&(!d.tcfv2.expectedFromGoogle?"function"!=typeof W.__tcfapi&&(d.tcfv2={enable:!1},Logger.log("TCFV2 disabled")):Logger.log("TCFV2 _tcfapi available after gpt.js")),[]),k=d.tcfv2&&d.tcfv2.enable;if(k){updateTcfAsPerConfig(d),concentCheckSum.expectedFromGoogle&&!W[N].concentCheckSum.googlefcSet[f.pbjsName]&&(W[N].concentCheckSum.googlefcSet[f.pbjsName]=!0,u()),concentCheckSum.expectedFromGoogle||W[N].uspapi.init_uspapi();var U=W[N].tcfv2.getGvlCode(),B=[U.google],L={};j.forEach(function(e,t){j[t].bids.forEach(function(e,t){e=e.bidder;L[e]||(L[e]=1,U[e]&&B.push(U[e]))})});try{Array.isArray(G_adUnitsFiltered)&&G_adUnitsFiltered.forEach(function(e){e&&Array.isArray(e.bids)&&e.bids.forEach(function(e){e=e.bidder;L[e]||(L[e]=1,U[e]&&B.push(U[e]))})})}catch(e){}L=U=void 0,W[N].concentCheckSum.affArBidderIds=B.concat(W[N].concentCheckSum.affArBidderIds),Logger.info("concentLogs our bidders : ",W[N].concentCheckSum.affArBidderIds)}function E(){var e=g.pubads().getSlots();if(e.length)for(var t=0,n=e.length;t<n;t++){var i=e[t],a=i.getAdUnitPath(),i=i.getSlotElementId();-1==a.indexOf("_HVR_")&&a in y&&(y[i]||(y[i]=1,pbjs.HBReq(i)))}0<_--?setTimeout(E,v):y=0}function O(e,t){A[C]._Q.push([e,t])}1<aff_hb_init_impl_call_count?"function"==typeof W[N].exp_upd_aucache&&W[N].exp_upd_aucache(j):(pbjs.que.push(function(){for(var e in pbjs.aliasBidder("appnexus","projectagora",{gvlid:1032}),pbjs.aliasBidder("appnexus","mcanvas",{gvlid:1032}),pbjs.aliasBidder("appnexus","mcanvashbpg",{gvlid:1032}),pbjs.aliasBidder("rubicon","blueroosterm",{gvlid:52}),pbjs.aliasBidder("appnexus","oftmedia",{gvlid:32}),pbjs.aliasBidder("truereach","momagic"),pbjs.aliasBidder("adlivetech","adlivetech2",{gvlid:686}),pbjs.aliasBidder("appnexus","bluerooster2",{gvlid:32}),pbjs.aliasBidder("appnexus","bluerooster",{gvlid:32}),pbjs.aliasBidder("adkernel","explorads",{gvlid:14}),pbjs.aliasBidder("adkernel","xapads",{gvlid:14}),pbjs.aliasBidder("adkernel","adliveconnect",{gvlid:14}),pbjs.aliasBidder("yahoossp","verizonmedia",{gvlid:25}),pbjs.aliasBidder("conversant","epsilon",{gvlid:24}),I)I.hasOwnProperty(e)&&(e=e.split("@"),pbjs.aliasBidder(e[0],e[1]),t[n].bidderAlias[e[1]]=e[0]);f.pbjsconf.rubicon={singleRequest:!0},1==l(1)&&Array.isArray(W[N].affGeoCmd)&&W[N].affGeoCmd.push(function(){1<l(2)&&pbjs.setConfig(f.pbjsconf)}),pbjs.setConfig(f.pbjsconf),f.aff.analytics&&Array.isArray(f.aff.analytics)&&f.aff.analytics.length&&pbjs.enableAnalytics(f.aff.analytics),f.aff.log.afelog&&affLogging(pbjs),a(f)}),f.bidderconf&&pbjs.que.push(function(){if(pbjs.setBidderConfig(f.bidderconf,!0),o(pbjs),r(pbjs),f.aff.directBidderSchainCnf&&Array.isArray(f.aff.directBidderSchainCnf)){var e,t=f.aff.directBidderSchainCnf;for(e in t)c(pbjs,t[e])}}),(w=f.aff.amazon||0)&&w.enabled&&w.pubID?((x=parseFloat2(w.timeout||0,800))<=0&&(x=parseFloat2(f.pbjsconf.bidderTimeout,800)),d.amazon={pubID:w.pubID,timeout:x=x<=0?800:x},x=p,(A=t)[C="apstag"]||(A[C]={init:function(){O("i",arguments)},fetchBids:function(){O("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(S=x.createElement("script")).async=!0,S.src="//c.amazon-adsystem.com/aax2/apstag.js",(x=x.getElementsByTagName("script")[0]).parentNode.insertBefore(S,x)),apstag.init({pubID:w.pubID,adServer:"googletag"})):d.amazon=!1,express(j,d),b=function(e){Logger.info("loadGpt ",e),2!=d.gpt_mode||g.apiReady||loadScript("https://securepubads.g.doubleclick.net/tag/js/gpt.js")},k&&!W[N].concentCheckSum.startPbjs?concentCheckSum.expectedFromGoogle?(Logger.info("concentLogs : concent will come from google, loading gpt."),b("gt")):(Logger.info("concentLogs : Checking for concent"),W[N].tcfv2.getConcentsWaitForApi(function(e){(e.gdprApplies?!0===e.vendor.consents[755]:1)&&b("t1");e=W[N].tcfv2.updateConsentManagement(W);"object"==typeof e&&0<Object.entries(e).length&&(Logger.info("concentLogs Concent found : ",e),f.pbjsconf.consentManagement=e,pbjs.que.push(function(){pbjs.setConfig(f.pbjsconf)})),pbjs_requestBids_wraper(null,null,null)},function(){Logger.error("concentLogs tcf found but not responsing.")},{vendorIds:W[N].concentCheckSum.affArBidderIds})):(b("a0"),W[N].concentCheckSum.startPbjs=!0),m=!0,h=function(e){for(var t=frameElement||0,n=t?t.contentWindow?t.contentWindow.document:t.contentDocument||p:p,i=0,a=e.length;i<a;i++)try{var o,r,d,f,s,c,l=e[i],u=l.aff.dfpAction||0;u&&(o=l.aff.code,r=l.aff.id,d=u.size,u.define&&(f=g.defineSlot(o,d,r).addService(g.pubads()),(s={}).inFrame=!!t,G.refreshInViewBySlot(f,s)),u.div&&!n.getElementById(r)&&((c=n.createElement("div")).id=r,n.body.appendChild(c)),u.auction?pbjs.que.push(function(){pbjs.HBReq(r),m&&(m=!1,g.enableServices())}):(m&&(m=!1,g.enableServices()),g.display(r)))}catch(e){}},g.cmd.push(function(){h(i)}),f.pubDfp&&f.pubDfp.callRefresh&&f.pubDfp.callRefresh.enable&&(_=0|f.pubDfp.callRefresh.max,v=0|f.pubDfp.callRefresh.dly,y={},_=_||10,v=v||200,j.forEach(function(e,t){y[e.aff.code||""]=0}),g.cmd.push(function(){pbjs.que.push(function(){E()})})))}!function(i,a){let o="affbidp",l="__afflib",n="aff_bidp",u=(i[a]=i[a]||{},i[a].que=i[a].que||[],function(e,t){let n="https://backfills.ph.affinity.com/Affinity_House_Banners/300x250.gif";var i={"120x600":"https://backfills.ph.affinity.com/Affinity_House_Banners/120x600.gif","300x250":"https://backfills.ph.affinity.com/Affinity_House_Banners/300x250.gif","300x600":"https://backfills.ph.affinity.com/Affinity_House_Banners/300x600.jpg","336x280":"https://backfills.ph.affinity.com/Affinity_House_Banners/336x280.jpg","160x600":"https://backfills.ph.affinity.com/Affinity_House_Banners/160x600.jpg","320x100":"https://backfills.ph.affinity.com/Affinity_House_Banners/320x100.gif","320x50":"https://backfills.ph.affinity.com/Affinity_House_Banners/320x50.gif","300x50":"https://backfills.ph.affinity.com/Affinity_House_Banners/300x50.gif","728x90":"https://backfills.ph.affinity.com/Affinity_House_Banners/728x90.gif"},e=e+"x"+t;return n=i[e]?i[e]:n}),p=function(e,t,n){return i[l]&&i[l][o]&&i[l][o][e]&&"function"==typeof i[l][o][e]?!!n||void i[l][o][[e]](t):(n=e+" missing in "+l+"."+o,Logger.warn(n),!1)};i[a].affCBidPF=p;function e(){var e=new Date,t=new Date;return t.setDate(e.getDate()),t.getTime()}function r(){return e()/864e5-19600|0}i[a].affSG=function(e,t){return i[l][o][[e]](t)},i[a].affAAb_s=!1,i[a].affAAb=function(t){if(t=t||{},i[a].affAAb_s||0===Object.entries(t).length)return i[a].affAAb_s;if(t&&t.aff&&t.aff.affinitytag&&t.aff.affinitytag.affdm&&t.aff.affinitytag.affdm.enabled){let e=!1;var n=t.aff.affinitytag.affdm.startDay||0,t=t.aff.affinitytag.affdm.endDay||0;return!!(e=n&&t&&!(n<=(n=r())&&n<=t)?e:!0)&&(i[a].affAAb_s=!0)}return!1};i[a].affibc=function(e,t){p("init",e,!0)?(i[l][o].init(e,t),Logger.info(n,"Bid p init started")):Logger.warn(n,"Bid p init not found")};function t(c){affpbjs.registerBidAdapter(function(){return{callBids:function(e,r,d){let f=11;f=0;var t={data:e};p("getCpm",t,!0)?f=i[l][o].getCpm(t):(t.a="Bid pressure config not found for :",t.type="warn",p("xLogger",t,!1));let s=e;s.bids.forEach(function(e){e=JSON.parse(JSON.stringify(e));let t=f,n=e.sizes[0][0],i=e.sizes[0][1],a=u(n,i);var o={transactionId:e.transactionId,referrer:"",adapterCode:c,originalCpm:19,originalCurrency:"USD",bidderCode:e.bidder,bidder:e.bidder,adUnitCode:e.adUnitCode,adId:e.bidId,requestId:e.bidId,width:n,height:i,size:n+"x"+i,cpm:t,ad:["<div style='width:"+n+"px;height:"+i+"px;background-color:#0a6682;color:white;'>","<a href='http://www.affinity.com/?utm_source=afbpv3&utm_medium=organic' target='_blank'>","<img src='"+a+"' />","</a>","</div>"].join(""),auctionId:s.auctionId,statusMessage:"Bid available",mediaType:"banner",source:"client",creativeId:7787454454,currency:"USD",netRevenue:!0,ttl:3e3,getSize:function(){return n+"x"+i},getStatusCode:function(){return 1}};t&&(r(e.adUnitCode,o),d())})}}},c)}i[a].affsdbc=function(e){i[a].que.push(function(){t(e)}),p("xLogger",{type:"info",a:e+" registered"},!1)}}(window,(document,"affpbjs"));

G_options.aff.afflog2=function(){};
G_options.debug=false;


      G_options.debug=(-1<location.href.indexOf('pbjs_debug=true')); 
      var extra =  {
        gpt_mode:2,
        tcfv2:{"enabled":false},
        ignbIniLoadDIsable: false,
        ignRefreshFromDisplay:{"enabled":false}      };

      
      
      if( W[N].hbCustCfg && 'function' == typeof W[N].hbCustCfg ){
        var o2 = W[N].hbCustCfg( G_adUnits, G_options, extra );
        G_adUnits = o2.G_adUnits;
        G_options = o2.G_options;
        extra = o2.extra;
      }

      aff_hb_init(window,window.document, 'affpbjs', window.googletag, G_adUnits, G_options, extra);


      if( G_options.aff.affinitytag && G_options.aff.affinitytag.enabled && affinitytag && affinitytag.init){
        affinitytag.init('affpbjs', G_adUnits, G_options, extra);
      }

      
      (function (W, D, N, M) {
        "use strict";
        W[N] = W[N] || {};
        W[N].cmd = W[N].cmd || [];

        if (W[N].cmd.isLoaded) {
            return
        }

        
        W[N].display=function(dt){
          if(G_options.debug){W[M].aftl(dt.id,"affinityhb.display()");}
                    dt = Object.assign({},{m:1,id:"",au:"",sz:0,targeting:{}}, dt||{} );
          var sl=0;
          if( googletag.apiReady ){
            var arSlots = googletag.pubads().getSlots();
            for(var i=arSlots.length-1; 0<=i; i--){
                if(dt.id == arSlots[i].getSlotElementId()){
                  sl=arSlots[i];
                  break;
                };
            }
            if(sl){
              var oDiv = D.getElementById( dt.id );
              if(2 == dt.m){
                if( oDiv ){ oDiv.setAttribute('dsp','aff2'); }
                if(!dt.au){ dt.au=sl.getAdUnitPath(); }
                if(!dt.sz){
                  dt.sz=[];
                  sl.getSizes().forEach(function(xSz){
                    if( xSz.getHeight ){ dt.sz.push( [xSz.getWidth(), xSz.getHeight() ]);}
                  });
                }
              }
              if(( sl.getEscapedQemQueryId && sl.getEscapedQemQueryId() ) || ( oDiv && oDiv.dataset && oDiv.dataset.googleQueryId )){
                  googletag.destroySlots([sl]);
                  sl=0;
              }
            }
          }

          if( dt && dt.id && dt.au && dt.sz ){
            var pn='affpbjs';
            W[pn].que.push(function(){
              var e=D.getElementById(dt.id);
              if(e){
                                    pbjs.HBReq2(dt.au, dt.sz, dt.id, {slot:sl, dsblFailsSafe:true, igncss:1, trgt:dt.targeting||{}, ignExp:0 });
              }
            });
          }
        };

        W[N].cmd.isLoaded = 1;
        function init_affinityhb_cmd() {
            if(G_options.debug){W[M].aftl('init',"affinityhb.cmd-ready");}
            W[N].cmd.push = function (fn) {
                fn.called = !0;
                try {
                    fn();
                } catch (er) {}
            };
            for (var ic = 0; ic < W[N].cmd.length; ic++) {
                if (!W[N].cmd[ic].called) {
                    W[N].cmd[ic].called = !0;
                    try {
                        W[N].cmd[ic]();
                    } catch (er) {}
                }
            }
        }

        googletag.cmd.push(function(){
          window[pbjsNM].que.push(init_affinityhb_cmd);
        });

      })(window, document, 'affinityhb', N);
          })();
  }
})(window,document,'__afflib');
